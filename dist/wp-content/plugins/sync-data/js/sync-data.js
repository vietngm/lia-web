(()=>{var o={23:(o,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>e});const e=t.p+"css/plugin.css"},25:()=>{jQuery((function(o){async function n(o){const n=o.filter((o=>o.isDisplay&&o.isActive)),t=[];for(let o=0;o<n.length;o+=10)t.push(n.slice(o,o+10));return t}root=o(this),envOp=root.find('[name="op_env"]'),o(document).on("click",".btn-service",(function(){const t=root.find('[name="endpoint"]').val(),e=root.find('[name="token"]').val(),a=root.find('[name="environment"]').val();return""===t?(o.fancybox("#modal-environment",{modal:!0,showCloseButton:!1}),!1):""===e?(o.fancybox("#modal-login",{modal:!0,showCloseButton:!1}),!1):(o.fancybox("#modal-process",{modal:!0,showCloseButton:!1}),void async function(t,e,a){try{const s=await fetch(`${t}/service?perPage=100`,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!s.ok)throw new Error(`${s.status}`);const r=await s.json();if(r&&r.data){const t=await n(r.data);!function(n,t){p=0;var e=setInterval((function(){o.ajax({url:syncDataVars.ajax_url,type:"POST",data:{action:"sync_service_data",status:t,p,data:n[p]},success:function(t){if(t){const a=t;a.page==n.length-1&&(o.fancybox.open("#modal-success",{modal:!0,showCloseButton:!1}),console.log(a.message)),a.page==n.length-1&&clearInterval(e),p++}else console.warn("Lỗi: Dữ liệu trả về không hợp lệ.",t)},error:function(o,n,t){console.error("Lỗi xảy ra:",n,t)}})}),5e3)}(t,a),console.log("Success:",t)}else console.warn("Không có dữ liệu hợp lệ:",r)}catch(n){o.fancybox({closeExisting:!0}),"401"==n.message?o.fancybox("#modal-login",{modal:!0,showCloseButton:!1}):o.fancybox("#modal-login-again",{modal:!0,showCloseButton:!1}),console.error("Lỗi khi lấy dữ liệu:",n)}}(t,e,a))})),o(document).on("click",".btn-doctor",(function(t){const e=root.find('[name="endpoint"]').val(),a=root.find('[name="token"]').val(),s=root.find('[name="environment"]').val();return""===e?(o.fancybox("#modal-environment",{modal:!0,showCloseButton:!1}),!1):""===a?(o.fancybox("#modal-login",{modal:!0,showCloseButton:!1}),!1):(o.fancybox("#modal-process",{modal:!0,showCloseButton:!1}),void async function(t,e,a){try{const s=await fetch(`${t}/practitioner`,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!s.ok)throw new Error(`${s.status}`);const r=await s.json();if(r&&r.data){const t=await n(r.data);!function(n,t){p=0;var e=setInterval((function(){o.ajax({url:syncDataVars.ajax_url,type:"POST",data:{action:"sync_doctor_data",status:t,p,data:n[p]},success:function(t){if(t){const a=t;a.page==n.length-1&&(o.fancybox.open("#modal-success",{modal:!0,showCloseButton:!1}),console.log(a.message)),a.page==n.length-1&&clearInterval(e),p++}else console.warn("Lỗi: Dữ liệu trả về không hợp lệ.",t)},error:function(o,n,t){console.error("Lỗi xảy ra:",n,t)}})}),5e3)}(t,a),console.log("Success:",t)}else console.warn("Không có dữ liệu hợp lệ:",r)}catch(n){o.fancybox({closeExisting:!0}),"401"==n.message?o.fancybox("#modal-login",{modal:!0,showCloseButton:!1}):o.fancybox("#modal-login-again",{modal:!0,showCloseButton:!1}),console.error("Lỗi khi lấy dữ liệu:",n)}}(e,a,s))})),envOp.change((function(){const n=o(this).val(),t=o("#op_env option:selected").text();root.find('[name="endpoint"]').val(n),root.find('[name="environment"]').val(t)})),o(".modal-close").on("click",(function(){o.fancybox.close()}))}))},208:()=>{jQuery((function(o){root=o(this),o(".btn-auth").on("click",(async function(n){const t=root.find('[name="username"]').prop("value"),e=root.find('[name="password"]').prop("value"),a=root.find('[name="endpoint"]').val();return""===a?(o.fancybox("#modal-environment",{modal:!0,showCloseButton:!1}),!1):""===t||""===e?(o.fancybox("#modal-account",{modal:!0,showCloseButton:!1}),!1):(o.fancybox("#modal-wait",{modal:!0,showCloseButton:!1}),o.ajax({url:a+"/auth/sign-in",type:"POST",dataType:"JSON",data:{username:t,password:e},success:async function(n){if(n){const a=n.data.token,s=n.data.refreshToken;await async function(n,t,e,a){o.ajax({url:syncDataVars.ajax_url,type:"POST",data:{action:"auth",token:n,refreshToken:t,username:e,password:a},success:async function(t){t?(o.fancybox({closeExisting:!0}),o("#post-body").append((html='<div class="postbox">',html+='<h3 class="hndle"><span>Actions</span></h3>',html+='<div class="inside environment">',html+='<input type="button" name="service" class="button btn-service" value="Service Sync"/>',html+='<input type="button" name="doctor" class="button btn-doctor" value="Practitioner Sync"/>',html+='<input type="button" name="testConnect" class="button btn-test-connent" value="Test Connect"/>',html+="</div></div>",html)),o("#login-status p strong").text("Đăng nhập thành công."),o("#login-status").append((html='<form name="form-sync-data" method="post" action="">',html+='<input type="submit" name="logout" id="logout" class="logout" value="Log Out" />',html+="</form>",html)),o("#wpbody-content").append(function(o){return html=`<input type="hidden" name="token" value="${o}">`,html}(n)),o("#login").remove(),o("#login-status").removeClass("error").addClass("updated")):console.log("Token luu khong thanh cong.")},error:function(){console.log("Loi khong ro ly do.")}})}(a,s,t,e),console.log("Sign in successfully")}else console.log(n)},error:function(){o.fancybox("#modal-account",{modal:!0,showCloseButton:!1}),console.log("Loi khong ro ly do.")}}),!1)}))}))},505:(o,n,t)=>{var e=t(795),a=t(23);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[o.id,a,""]]);e(a,{insert:"head",singleton:!1}),o.exports=a.locals||{}},506:(o,n,t)=>{"use strict";t(25),t(939),t(208)},795:(o,n,t)=>{"use strict";var e,a=function(){var o={};return function(n){if(void 0===o[n]){var t=document.querySelector(n);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(o){t=null}o[n]=t}return o[n]}}(),s=[];function r(o){for(var n=-1,t=0;t<s.length;t++)if(s[t].identifier===o){n=t;break}return n}function i(o,n){for(var t={},e=[],a=0;a<o.length;a++){var i=o[a],c=n.base?i[0]+n.base:i[0],l=t[c]||0,u="".concat(c," ").concat(l);t[c]=l+1;var d=r(u),f={css:i[1],media:i[2],sourceMap:i[3]};-1!==d?(s[d].references++,s[d].updater(f)):s.push({identifier:u,updater:m(f,n),references:1}),e.push(u)}return e}function c(o){var n=document.createElement("style"),e=o.attributes||{};if(void 0===e.nonce){var s=t.nc;s&&(e.nonce=s)}if(Object.keys(e).forEach((function(o){n.setAttribute(o,e[o])})),"function"==typeof o.insert)o.insert(n);else{var r=a(o.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}return n}var l,u=(l=[],function(o,n){return l[o]=n,l.filter(Boolean).join("\n")});function d(o,n,t,e){var a=t?"":e.media?"@media ".concat(e.media," {").concat(e.css,"}"):e.css;if(o.styleSheet)o.styleSheet.cssText=u(n,a);else{var s=document.createTextNode(a),r=o.childNodes;r[n]&&o.removeChild(r[n]),r.length?o.insertBefore(s,r[n]):o.appendChild(s)}}function f(o,n,t){var e=t.css,a=t.media,s=t.sourceMap;if(a?o.setAttribute("media",a):o.removeAttribute("media"),s&&"undefined"!=typeof btoa&&(e+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),o.styleSheet)o.styleSheet.cssText=e;else{for(;o.firstChild;)o.removeChild(o.firstChild);o.appendChild(document.createTextNode(e))}}var p=null,h=0;function m(o,n){var t,e,a;if(n.singleton){var s=h++;t=p||(p=c(n)),e=d.bind(null,t,s,!1),a=d.bind(null,t,s,!0)}else t=c(n),e=f.bind(null,t,n),a=function(){!function(o){if(null===o.parentNode)return!1;o.parentNode.removeChild(o)}(t)};return e(o),function(n){if(n){if(n.css===o.css&&n.media===o.media&&n.sourceMap===o.sourceMap)return;e(o=n)}else a()}}o.exports=function(o,n){(n=n||{}).singleton||"boolean"==typeof n.singleton||(n.singleton=(void 0===e&&(e=Boolean(window&&document&&document.all&&!window.atob)),e));var t=i(o=o||[],n);return function(o){if(o=o||[],"[object Array]"===Object.prototype.toString.call(o)){for(var e=0;e<t.length;e++){var a=r(t[e]);s[a].references--}for(var c=i(o,n),l=0;l<t.length;l++){var u=r(t[l]);0===s[u].references&&(s[u].updater(),s.splice(u,1))}t=c}}}},939:()=>{jQuery((function(o){root=o(this),o(document).on("click",".js-dashicons-failure",(function(){const n=o(this).parent("li").attr("data-rel");o.fancybox("#modal-process",{modal:!0,showCloseButton:!1}),function(n){o.ajax({url:syncDataVars.ajax_url,type:"GET",data:{action:"sync_booking",bookingId:n},success:function(t){if(t){const e=JSON.parse(t);e.data&&""!=e.data.token&&1==e.data.sync&&async function(n){const{apiUrl:t,token:e}=n;try{const a=await fetch(`${t}/booking/web-portal`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(n)});if(!a.ok)throw new Error(`${a.status}`);const s=await a.json();s&&s.data?(o.fancybox.open("#modal-success",{modal:!0,showCloseButton:!1}),console.log("LiA APP:",n)):console.warn("Không có dữ liệu hợp lệ:",s)}catch(o){console.error("Lỗi khi lấy dữ liệu:",o)}}(e.data),o(document).find(`.status-item-${n}`).empty().append('<span class="dashicons dashicons-yes-alt dashicons-success"></span>')}else console.warn("Lỗi: Dữ liệu trả về không hợp lệ.",t)},error:function(o,n,t){console.error("Lỗi xảy ra:",n,t)}})}(n)}))}))}},n={};function t(e){var a=n[e];if(void 0!==a)return a.exports;var s=n[e]={id:e,exports:{}};return o[e](s,s.exports,t),s.exports}t.n=o=>{var n=o&&o.__esModule?()=>o.default:()=>o;return t.d(n,{a:n}),n},t.d=(o,n)=>{for(var e in n)t.o(n,e)&&!t.o(o,e)&&Object.defineProperty(o,e,{enumerable:!0,get:n[e]})},t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(o){if("object"==typeof window)return window}}(),t.o=(o,n)=>Object.prototype.hasOwnProperty.call(o,n),t.r=o=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},(()=>{var o;t.g.importScripts&&(o=t.g.location+"");var n=t.g.document;if(!o&&n&&(n.currentScript&&"SCRIPT"===n.currentScript.tagName.toUpperCase()&&(o=n.currentScript.src),!o)){var e=n.getElementsByTagName("script");if(e.length)for(var a=e.length-1;a>-1&&(!o||!/^http(s?):/.test(o));)o=e[a--].src}if(!o)throw new Error("Automatic publicPath is not supported in this browser");o=o.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=o+"../"})(),t.nc=void 0,t(506),t(505)})();