(()=>{var o={18:(o,n,e)=>{"use strict";e.r(n),e.d(n,{default:()=>t});const t=e.p+"css/plugin.css"},33:()=>{jQuery((function(o){root=o(this),o(".btn-auth").on("click",(async function(n){const e=root.find('[name="username"]').prop("value"),t=root.find('[name="password"]').prop("value"),a=root.find('[name="endpoint"]').val();return""===a?(o.fancybox("#modal-environment",{modal:!0,showCloseButton:!1}),!1):""===e||""===t?(o.fancybox("#modal-account",{modal:!0,showCloseButton:!1}),!1):(o.fancybox("#modal-wait",{modal:!0,showCloseButton:!1}),o.ajax({url:a+"/auth/sign-in",type:"POST",dataType:"JSON",data:{username:e,password:t},success:async function(n){if(n){const a=n.data.token,s=n.data.refreshToken;await async function(n,e,t,a){o.ajax({url:AJAX_URL,type:"POST",data:{action:"auth",token:n,refreshToken:e,username:t,password:a},success:async function(e){e?(o.fancybox({closeExisting:!0}),o("#post-body").append((html='<div class="postbox">',html+='<h3 class="hndle"><span>Actions</span></h3>',html+='<div class="inside environment">',html+='<input type="button" name="service" class="button btn-service" value="Service Sync"/>',html+='<input type="button" name="doctor" class="button btn-doctor" value="Practitioner Sync"/>',html+='<input type="button" name="testConnect" class="button btn-test-connent" value="Test Connect"/>',html+="</div></div>",html)),o("#login-status p strong").text("Đăng nhập thành công."),o("#login-status").append((html='<form name="form-sync-data" method="post" action="">',html+='<input type="submit" name="logout" id="logout" class="logout" value="Log Out" />',html+="</form>",html)),o("#wpbody-content").append(function(o){return html=`<input type="hidden" name="token" value="${o}">`,html}(n)),o("#login").remove(),o("#login-status").removeClass("error").addClass("updated")):console.log("Token luu khong thanh cong.")},error:function(){console.log("Loi khong ro ly do.")}})}(a,s,e,t),console.log("Sign in successfully")}else console.log(n)},error:function(){o.fancybox("#modal-account",{modal:!0,showCloseButton:!1}),console.log("Loi khong ro ly do.")}}),!1)}))}))},312:()=>{jQuery((function(o){async function n(o){const n=o.filter((o=>o.isDisplay&&o.isActive)),e=[];for(let o=0;o<n.length;o+=10)e.push(n.slice(o,o+10));return e}root=o(this),envOp=root.find('[name="op_env"]'),o(document).on("click",".btn-service",(function(){const e=root.find('[name="endpoint"]').val(),t=root.find('[name="token"]').val(),a=root.find('[name="environment"]').val();return""===e?(o.fancybox("#modal-environment",{modal:!0,showCloseButton:!1}),!1):""===t?(o.fancybox("#modal-login",{modal:!0,showCloseButton:!1}),!1):(o.fancybox("#modal-process",{modal:!0,showCloseButton:!1}),void async function(e,t,a){try{const s=await fetch(`${e}/service?perPage=100`,{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!s.ok)throw new Error(`${s.status}`);const r=await s.json();if(r&&r.data){const e=await n(r.data);!function(n,e){p=0;var t=setInterval((function(){o.ajax({url:AJAX_URL,type:"POST",data:{action:"sync_service_data",status:e,p,data:n[p]},success:function(e){if(e){const a=JSON.parse(e);a.page==n.length-1&&(o.fancybox.open("#modal-success",{modal:!0,showCloseButton:!1}),console.log(a.message)),a.page==n.length-1&&clearInterval(t),p++}else console.warn("Lỗi: Dữ liệu trả về không hợp lệ.",e)},error:function(o,n,e){console.error("Lỗi xảy ra:",n,e)}})}),5e3)}(e,a),console.log("Success:",e)}else console.warn("Không có dữ liệu hợp lệ:",r)}catch(n){o.fancybox({closeExisting:!0}),"401"==n.message?o.fancybox("#modal-login",{modal:!0,showCloseButton:!1}):o.fancybox("#modal-login-again",{modal:!0,showCloseButton:!1}),console.error("Lỗi khi lấy dữ liệu:",n)}}(e,t,a))})),o(document).on("click",".btn-doctor",(function(e){const t=root.find('[name="endpoint"]').val(),a=root.find('[name="token"]').val(),s=root.find('[name="environment"]').val();return""===t?(o.fancybox("#modal-environment",{modal:!0,showCloseButton:!1}),!1):""===a?(o.fancybox("#modal-login",{modal:!0,showCloseButton:!1}),!1):(o.fancybox("#modal-process",{modal:!0,showCloseButton:!1}),void async function(e,t,a){try{const s=await fetch(`${e}/practitioner`,{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!s.ok)throw new Error(`${s.status}`);const r=await s.json();if(r&&r.data){const e=await n(r.data);!function(n,e){p=0;var t=setInterval((function(){o.ajax({url:AJAX_URL,type:"POST",data:{action:"sync_doctor_data",status:e,p,data:n[p]},success:function(e){if(e){const a=JSON.parse(e);a.page==n.length-1&&(o.fancybox.open("#modal-success",{modal:!0,showCloseButton:!1}),console.log(a.message)),a.page==n.length-1&&clearInterval(t),p++}else console.warn("Lỗi: Dữ liệu trả về không hợp lệ.",e)},error:function(o,n,e){console.error("Lỗi xảy ra:",n,e)}})}),5e3)}(e,a),console.log("Success:",e)}else console.warn("Không có dữ liệu hợp lệ:",r)}catch(n){o.fancybox({closeExisting:!0}),"401"==n.message?o.fancybox("#modal-login",{modal:!0,showCloseButton:!1}):o.fancybox("#modal-login-again",{modal:!0,showCloseButton:!1}),console.error("Lỗi khi lấy dữ liệu:",n)}}(t,a,s))})),envOp.change((function(){const n=o(this).val(),e=o("#op_env option:selected").text();root.find('[name="endpoint"]').val(n),root.find('[name="environment"]').val(e)})),o(".modal-close").on("click",(function(){o.fancybox.close()}))}))},398:(o,n,e)=>{var t=e(453),a=e(18);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[o.id,a,""]]);t(a,{insert:"head",singleton:!1}),o.exports=a.locals||{}},453:(o,n,e)=>{"use strict";var t,a=function(){var o={};return function(n){if(void 0===o[n]){var e=document.querySelector(n);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(o){e=null}o[n]=e}return o[n]}}(),s=[];function r(o){for(var n=-1,e=0;e<s.length;e++)if(s[e].identifier===o){n=e;break}return n}function i(o,n){for(var e={},t=[],a=0;a<o.length;a++){var i=o[a],c=n.base?i[0]+n.base:i[0],l=e[c]||0,u="".concat(c," ").concat(l);e[c]=l+1;var d=r(u),p={css:i[1],media:i[2],sourceMap:i[3]};-1!==d?(s[d].references++,s[d].updater(p)):s.push({identifier:u,updater:m(p,n),references:1}),t.push(u)}return t}function c(o){var n=document.createElement("style"),t=o.attributes||{};if(void 0===t.nonce){var s=e.nc;s&&(t.nonce=s)}if(Object.keys(t).forEach((function(o){n.setAttribute(o,t[o])})),"function"==typeof o.insert)o.insert(n);else{var r=a(o.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}return n}var l,u=(l=[],function(o,n){return l[o]=n,l.filter(Boolean).join("\n")});function d(o,n,e,t){var a=e?"":t.media?"@media ".concat(t.media," {").concat(t.css,"}"):t.css;if(o.styleSheet)o.styleSheet.cssText=u(n,a);else{var s=document.createTextNode(a),r=o.childNodes;r[n]&&o.removeChild(r[n]),r.length?o.insertBefore(s,r[n]):o.appendChild(s)}}function p(o,n,e){var t=e.css,a=e.media,s=e.sourceMap;if(a?o.setAttribute("media",a):o.removeAttribute("media"),s&&"undefined"!=typeof btoa&&(t+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),o.styleSheet)o.styleSheet.cssText=t;else{for(;o.firstChild;)o.removeChild(o.firstChild);o.appendChild(document.createTextNode(t))}}var f=null,h=0;function m(o,n){var e,t,a;if(n.singleton){var s=h++;e=f||(f=c(n)),t=d.bind(null,e,s,!1),a=d.bind(null,e,s,!0)}else e=c(n),t=p.bind(null,e,n),a=function(){!function(o){if(null===o.parentNode)return!1;o.parentNode.removeChild(o)}(e)};return t(o),function(n){if(n){if(n.css===o.css&&n.media===o.media&&n.sourceMap===o.sourceMap)return;t(o=n)}else a()}}o.exports=function(o,n){(n=n||{}).singleton||"boolean"==typeof n.singleton||(n.singleton=(void 0===t&&(t=Boolean(window&&document&&document.all&&!window.atob)),t));var e=i(o=o||[],n);return function(o){if(o=o||[],"[object Array]"===Object.prototype.toString.call(o)){for(var t=0;t<e.length;t++){var a=r(e[t]);s[a].references--}for(var c=i(o,n),l=0;l<e.length;l++){var u=r(e[l]);0===s[u].references&&(s[u].updater(),s.splice(u,1))}e=c}}}},525:(o,n,e)=>{"use strict";e(312),e(772),e(33)},772:()=>{jQuery((function(o){root=o(this),o(document).on("click",".js-dashicons-failure",(function(){const n=o(this).parent("li").attr("data-rel");o.fancybox("#modal-process",{modal:!0,showCloseButton:!1}),function(n){o.ajax({url:AJAX_URL,type:"GET",data:{action:"sync_booking",bookingId:n},success:function(e){if(e){const t=JSON.parse(e);t.data&&""!=t.data.token&&1==t.data.sync&&async function(n){const{apiUrl:e,token:t}=n;try{const a=await fetch(`${e}/booking/web-portal`,{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(n)});if(!a.ok)throw new Error(`${a.status}`);const s=await a.json();s&&s.data?(o.fancybox.open("#modal-success",{modal:!0,showCloseButton:!1}),console.log("LiA APP:",n)):console.warn("Không có dữ liệu hợp lệ:",s)}catch(o){console.error("Lỗi khi lấy dữ liệu:",o)}}(t.data),o(document).find(`.status-item-${n}`).empty().append('<span class="dashicons dashicons-yes-alt dashicons-success"></span>')}else console.warn("Lỗi: Dữ liệu trả về không hợp lệ.",e)},error:function(o,n,e){console.error("Lỗi xảy ra:",n,e)}})}(n)}))}))}},n={};function e(t){var a=n[t];if(void 0!==a)return a.exports;var s=n[t]={id:t,exports:{}};return o[t](s,s.exports,e),s.exports}e.n=o=>{var n=o&&o.__esModule?()=>o.default:()=>o;return e.d(n,{a:n}),n},e.d=(o,n)=>{for(var t in n)e.o(n,t)&&!e.o(o,t)&&Object.defineProperty(o,t,{enumerable:!0,get:n[t]})},e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(o){if("object"==typeof window)return window}}(),e.o=(o,n)=>Object.prototype.hasOwnProperty.call(o,n),e.r=o=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},(()=>{var o;e.g.importScripts&&(o=e.g.location+"");var n=e.g.document;if(!o&&n&&(n.currentScript&&"SCRIPT"===n.currentScript.tagName.toUpperCase()&&(o=n.currentScript.src),!o)){var t=n.getElementsByTagName("script");if(t.length)for(var a=t.length-1;a>-1&&(!o||!/^http(s?):/.test(o));)o=t[a--].src}if(!o)throw new Error("Automatic publicPath is not supported in this browser");o=o.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=o+"../"})(),e.nc=void 0,e(525),e(398)})();