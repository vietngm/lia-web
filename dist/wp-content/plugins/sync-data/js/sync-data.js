(()=>{var o={33:()=>{jQuery((function(o){root=o(this),o(".btn-auth").on("click",(async function(e){const n=root.find('[name="username"]').prop("value"),t=root.find('[name="password"]').prop("value"),a=root.find('[name="endpoint"]').val();return""===a?(o.fancybox("#modal-environment",{modal:!0,showCloseButton:!1}),!1):""===n||""===t?(o.fancybox("#modal-account",{modal:!0,showCloseButton:!1}),!1):(o.fancybox("#modal-wait",{modal:!0,showCloseButton:!1}),o.ajax({url:a+"/auth/sign-in",type:"POST",dataType:"JSON",data:{username:n,password:t},success:async function(e){if(e){const n=e.data.token,t=e.data.refreshToken;await async function(e,n){o.ajax({url:AJAX_URL,type:"POST",data:{action:"auth",token:e,refreshToken:n},success:async function(n){n?(o.fancybox({closeExisting:!0}),o("#post-body").append((html='<div class="postbox">',html+='<h3 class="hndle"><span>Actions</span></h3>',html+='<div class="inside environment">',html+='<input type="button" name="service" class="button btn-service" value="Service Sync"/>',html+='<input type="button" name="doctor" class="button btn-doctor" value="Practitioner Sync"/>',html+="</div></div>",html)),o("#login-status p strong").text("Đăng nhập thành công."),o("#login-status").append((html='<form name="form-sync-data" method="post" action="">',html+='<input type="submit" name="logout" id="logout" class="logout" value="Log Out" />',html+="</form>",html)),o("#wpbody-content").append(function(o){return html=`<input type="hidden" name="token" value="${o}">`,html}(e)),o("#login").remove(),o("#login-status").removeClass("error").addClass("updated")):console.log("Token luu khong thanh cong.")},error:function(){console.log("Loi khong ro ly do.")}})}(n,t),console.log("Sign in successfully")}else console.log(e)},error:function(){o.fancybox("#modal-account",{modal:!0,showCloseButton:!1}),console.log("Loi khong ro ly do.")}}),!1)}))}))},172:(o,e,n)=>{var t=n(453),a=n(192);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[o.id,a,""]]);t(a,{insert:"head",singleton:!1}),o.exports=a.locals||{}},192:(o,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>t});const t=n.p+"css/common.css"},312:()=>{jQuery((function(o){async function e(o){const e=o.filter((o=>o.isDisplay&&o.isActive)),n=[];for(let o=0;o<e.length;o+=10)n.push(e.slice(o,o+10));return n}root=o(this),envOp=root.find('[name="op_env"]'),o(document).on("click",".btn-service",(function(){const n=root.find('[name="endpoint"]').val(),t=root.find('[name="token"]').val(),a=root.find('[name="environment"]').val();return""===n?(o.fancybox("#modal-environment",{modal:!0,showCloseButton:!1}),!1):""===t?(o.fancybox("#modal-login",{modal:!0,showCloseButton:!1}),!1):(o.fancybox("#modal-process",{modal:!0,showCloseButton:!1}),void async function(n,t,a){try{const r=await fetch(`${n}/service?perPage=100`,{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error(`${r.status}`);const s=await r.json();if(s&&s.data){const n=await e(s.data);!function(e,n){p=0;var t=setInterval((function(){o.ajax({url:AJAX_URL,type:"POST",data:{action:"sync_service_data",status:n,p,data:e[p]},success:function(n){if(n){const a=JSON.parse(n);a.page==e.length-1&&(o.fancybox.open("#modal-success",{modal:!0,showCloseButton:!1}),console.log(a.message)),a.page==e.length-1&&clearInterval(t),p++}else console.warn("Lỗi: Dữ liệu trả về không hợp lệ.",n)},error:function(o,e,n){console.error("Lỗi xảy ra:",e,n)}})}),5e3)}(n,a),console.log("Success:",n)}else console.warn("Không có dữ liệu hợp lệ:",s)}catch(e){o.fancybox({closeExisting:!0}),"401"==e.message?o.fancybox("#modal-login",{modal:!0,showCloseButton:!1}):o.fancybox("#modal-login-again",{modal:!0,showCloseButton:!1}),console.error("Lỗi khi lấy dữ liệu:",e)}}(n,t,a))})),o(document).on("click",".btn-doctor",(function(n){const t=root.find('[name="endpoint"]').val(),a=root.find('[name="token"]').val(),r=root.find('[name="environment"]').val();return""===t?(o.fancybox("#modal-environment",{modal:!0,showCloseButton:!1}),!1):""===a?(o.fancybox("#modal-login",{modal:!0,showCloseButton:!1}),!1):(o.fancybox("#modal-process",{modal:!0,showCloseButton:!1}),void async function(n,t,a){try{const r=await fetch(`${n}/practitioner`,{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error(`${r.status}`);const s=await r.json();if(s&&s.data){const n=await e(s.data);!function(e,n){p=0;var t=setInterval((function(){o.ajax({url:AJAX_URL,type:"POST",data:{action:"sync_doctor_data",status:n,p,data:e[p]},success:function(n){if(n){const a=JSON.parse(n);a.page==e.length-1&&(o.fancybox.open("#modal-success",{modal:!0,showCloseButton:!1}),console.log(a.message)),a.page==e.length-1&&clearInterval(t),p++}else console.warn("Lỗi: Dữ liệu trả về không hợp lệ.",n)},error:function(o,e,n){console.error("Lỗi xảy ra:",e,n)}})}),5e3)}(n,a),console.log("Success:",n)}else console.warn("Không có dữ liệu hợp lệ:",s)}catch(e){o.fancybox({closeExisting:!0}),"401"==e.message?o.fancybox("#modal-login",{modal:!0,showCloseButton:!1}):o.fancybox("#modal-login-again",{modal:!0,showCloseButton:!1}),console.error("Lỗi khi lấy dữ liệu:",e)}}(t,a,r))})),envOp.change((function(){const e=o(this).val(),n=o("#op_env option:selected").text();root.find('[name="endpoint"]').val(e),root.find('[name="environment"]').val(n)})),o(".modal-close").on("click",(function(){o.fancybox.close()}))}))},453:(o,e,n)=>{"use strict";var t,a=function(){var o={};return function(e){if(void 0===o[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(o){n=null}o[e]=n}return o[e]}}(),r=[];function s(o){for(var e=-1,n=0;n<r.length;n++)if(r[n].identifier===o){e=n;break}return e}function i(o,e){for(var n={},t=[],a=0;a<o.length;a++){var i=o[a],c=e.base?i[0]+e.base:i[0],l=n[c]||0,u="".concat(c," ").concat(l);n[c]=l+1;var d=s(u),f={css:i[1],media:i[2],sourceMap:i[3]};-1!==d?(r[d].references++,r[d].updater(f)):r.push({identifier:u,updater:h(f,e),references:1}),t.push(u)}return t}function c(o){var e=document.createElement("style"),t=o.attributes||{};if(void 0===t.nonce){var r=n.nc;r&&(t.nonce=r)}if(Object.keys(t).forEach((function(o){e.setAttribute(o,t[o])})),"function"==typeof o.insert)o.insert(e);else{var s=a(o.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(e)}return e}var l,u=(l=[],function(o,e){return l[o]=e,l.filter(Boolean).join("\n")});function d(o,e,n,t){var a=n?"":t.media?"@media ".concat(t.media," {").concat(t.css,"}"):t.css;if(o.styleSheet)o.styleSheet.cssText=u(e,a);else{var r=document.createTextNode(a),s=o.childNodes;s[e]&&o.removeChild(s[e]),s.length?o.insertBefore(r,s[e]):o.appendChild(r)}}function f(o,e,n){var t=n.css,a=n.media,r=n.sourceMap;if(a?o.setAttribute("media",a):o.removeAttribute("media"),r&&"undefined"!=typeof btoa&&(t+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),o.styleSheet)o.styleSheet.cssText=t;else{for(;o.firstChild;)o.removeChild(o.firstChild);o.appendChild(document.createTextNode(t))}}var p=null,m=0;function h(o,e){var n,t,a;if(e.singleton){var r=m++;n=p||(p=c(e)),t=d.bind(null,n,r,!1),a=d.bind(null,n,r,!0)}else n=c(e),t=f.bind(null,n,e),a=function(){!function(o){if(null===o.parentNode)return!1;o.parentNode.removeChild(o)}(n)};return t(o),function(e){if(e){if(e.css===o.css&&e.media===o.media&&e.sourceMap===o.sourceMap)return;t(o=e)}else a()}}o.exports=function(o,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=(void 0===t&&(t=Boolean(window&&document&&document.all&&!window.atob)),t));var n=i(o=o||[],e);return function(o){if(o=o||[],"[object Array]"===Object.prototype.toString.call(o)){for(var t=0;t<n.length;t++){var a=s(n[t]);r[a].references--}for(var c=i(o,e),l=0;l<n.length;l++){var u=s(n[l]);0===r[u].references&&(r[u].updater(),r.splice(u,1))}n=c}}}},525:(o,e,n)=>{"use strict";n(312),n(772),n(33)},772:()=>{jQuery((function(o){root=o(this),o(document).on("click",".js-dashicons-failure",(function(){var e;e=o(this).parent("li").attr("data-rel"),console.log(AJAX_URL),console.log(e),o.ajax({url:AJAX_URL,type:"GET",data:{action:"sync_booking",bookingId:"2846",data:""},success:function(o){if(o){const e=JSON.parse(o);console.log(e),console.log("result"),console.log(o.success)}else console.warn("Lỗi: Dữ liệu trả về không hợp lệ.",o)},error:function(o,e,n){console.error("Lỗi xảy ra:",e,n)}})}))}))}},e={};function n(t){var a=e[t];if(void 0!==a)return a.exports;var r=e[t]={id:t,exports:{}};return o[t](r,r.exports,n),r.exports}n.n=o=>{var e=o&&o.__esModule?()=>o.default:()=>o;return n.d(e,{a:e}),e},n.d=(o,e)=>{for(var t in e)n.o(e,t)&&!n.o(o,t)&&Object.defineProperty(o,t,{enumerable:!0,get:e[t]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(o){if("object"==typeof window)return window}}(),n.o=(o,e)=>Object.prototype.hasOwnProperty.call(o,e),n.r=o=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},(()=>{var o;n.g.importScripts&&(o=n.g.location+"");var e=n.g.document;if(!o&&e&&(e.currentScript&&"SCRIPT"===e.currentScript.tagName.toUpperCase()&&(o=e.currentScript.src),!o)){var t=e.getElementsByTagName("script");if(t.length)for(var a=t.length-1;a>-1&&(!o||!/^http(s?):/.test(o));)o=t[a--].src}if(!o)throw new Error("Automatic publicPath is not supported in this browser");o=o.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=o+"../"})(),n.nc=void 0,n(525),n(172)})();